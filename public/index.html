<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>Akƒ±llƒ± DC G√º√ß √únitesi</title>

<link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/D%C3%BCzce_University_logo.svg/1200px-D%C3%BCzce_University_logo.svg.png">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
}

html.dark, body.dark {
  background: var(--bg);
  color: var(--text);
}

/* -----------------------------------------------------
   THEME VARIABLES
----------------------------------------------------- */
body{
  font-family:'Segoe UI',Arial,sans-serif;
  margin:0;padding:0;
  --bg:#eef2f6;--text:#111;
  --card:rgba(255,255,255,0.6);
  --border:rgba(255,255,255,0.5);
}
body.dark{
  --bg:#0b0c0e;--text:#eee;
  --card:rgba(20,20,20,0.48);
  --border:rgba(255,255,255,0.06);
}

/* -----------------------------------------------------
   LOGIN SCREEN
----------------------------------------------------- */
#loginScreen{
  position:fixed; inset:0;
  background:var(--bg);
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  gap:18px;
}
#loginBox{
  background:var(--card);
  border:1px solid var(--border);
  padding:22px 28px; width:300px;
  border-radius:14px;
  display:flex; flex-direction:column; gap:12px;
  text-align:center;
  transition:0.25s;
}
#loginBox.shake{
  animation:shakeAnim 0.35s ease;
}
@keyframes shakeAnim{
  0%{transform:translateX(0);}
  25%{transform:translateX(-6px);}
  50%{transform:translateX(6px);}
  75%{transform:translateX(-6px);}
  100%{transform:translateX(0);}
}
#loginBox.errorBorder{
  border:1px solid #c62828;
  box-shadow:0 0 8px rgba(198,40,40,0.6);
}
#loginBox.success{
  border:1px solid #00c853 !important;
  box-shadow:0 0 14px rgba(0,200,83,0.8) !important;
  animation:successPop 0.45s ease forwards;
}
@keyframes successPop{
  0%{ transform:scale(1); opacity:1; }
  50%{ transform:scale(1.07); opacity:1; }
  100%{ transform:scale(0.7); opacity:0; }
}

#loginBox input{
  padding:10px;border-radius:8px;
  border:1px solid var(--border);width:100%;
}
#passwordWrap{ position:relative;width:100%; }
#togglePass{
  position:absolute;right:10px;top:50%;
  transform:translateY(-50%);
  cursor:pointer;font-size:18px;
}
#capsWarning{
  color:#c62828;font-size:12px;
  display:none;margin-top:-6px;
}
#loginBox button{
  padding:10px;border-radius:8px;border:none;
  cursor:pointer;background:#1E88E5;color:white;
  font-size:15px;font-weight:600;
}
#blockMsg{color:#c62828;font-size:13px;}

.logoutBtn{
  cursor:pointer;font-size:15px;
  padding:6px 10px;border-radius:8px;
  border:1px solid var(--border);background:var(--card);
}

/* -----------------------------------------------------
   DASHBOARD
----------------------------------------------------- */
.header{
  display:flex;justify-content:space-between;align-items:center;
  max-width:1200px;margin:0 auto 12px;padding:14px;
}
.title{display:flex;flex-direction:column;font-weight:700;}
.subtitle{font-size:12px;opacity:0.75;margin-top:4px;}
.right-controls{display:flex;align-items:center;gap:12px;}
.clock{font-size:16px;font-weight:600;padding:8px 12px;border-radius:10px;
  background:var(--card);border:1px solid var(--border);}
.lastData{font-size:12px;opacity:0.85;margin-top:6px;}
.themeToggle{
  padding:6px 10px;border-radius:6px;
  border:1px solid var(--border);background:var(--card);
  cursor:pointer;font-size:14px;
}

.summary{
  max-width:1200px;margin:8px auto;
  display:flex;gap:12px;justify-content:center;
  flex-wrap:wrap;padding:0 14px;
}
.sum-card{
  background:var(--card);border:1px solid var(--border);
  padding:12px 16px;border-radius:12px;
  min-width:120px;text-align:center;
}

.grid{
  max-width:1200px;margin:14px auto;
  display:grid;grid-template-columns:repeat(2,1fr);
  gap:16px;padding:0 14px;
}
@media(max-width:800px){ .grid{grid-template-columns:1fr;} }

.card{
  background:var(--card);border:1px solid var(--border);
  border-radius:14px;padding:12px;
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
  transform-origin:top;transform:scale(0.9);
}
.card:hover{transform:scale(0.94);}
.card-title{
  display:flex;justify-content:space-between;align-items:center;
  gap:8px;margin-bottom:8px;font-weight:700;font-size:15px;
}
.status-dot{width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px;}
.values-row{display:flex;justify-content:space-between;gap:10px;margin-bottom:8px;}
.val-box{text-align:center;flex:1;}
.val-num{font-weight:800;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px;}
.tiny{font-size:12px;opacity:0.7;}

/* -----------------------------------------------------
   SESSION MODAL (son 10 dk uyarƒ±sƒ±)
----------------------------------------------------- */
#sessionModal {
  position: fixed;
  inset: 0;
  backdrop-filter: blur(4px);
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#sessionModalBox {
  background: var(--card);
  border: 1px solid var(--border);
  padding: 24px;
  border-radius: 12px;
  width: 320px;
  text-align: center;
  animation: popIn .25s ease;
}
@keyframes popIn {
  0%{ transform: scale(0.7); opacity: 0; }
  100%{ transform: scale(1); opacity: 1; }
}
#sessionModal button {
  margin-top: 12px;
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
}
#continueBtn { background:#1E88E5;color:white; }
#logoutBtn2 { background:#b71c1c;color:white;margin-top:10px; }

/* -----------------------------------------------------
   Cƒ∞HAZ Lƒ∞STESƒ∞ MODAL (üîå Baƒülƒ± Cihazlar)
----------------------------------------------------- */
#devicesModal {
  position: fixed;
  inset: 0;
  backdrop-filter: blur(4px);
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#devicesModalBox {
  background: var(--card);
  border: 1px solid var(--border);
  padding: 20px;
  border-radius: 12px;
  width: 360px;
  max-width: 95vw;
  text-align: left;
  animation: popIn .25s ease;
}
#devicesList {
  max-height: 260px;
  overflow-y: auto;
  margin-top: 8px;
}
.deviceRow {
  border-bottom: 1px solid var(--border);
  padding: 6px 0 10px 0;
}
.deviceRow:last-child {
  border-bottom: none;
}
.deviceRow button {
  margin-top: 6px;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  background:#b71c1c;
  color:white;
}
#closeDevicesBtn {
  margin-top: 12px;
  width: 100%;
  padding: 8px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
}
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/D%C3%BCzce_University_logo.svg/1200px-D%C3%BCzce_University_logo.svg.png"
       style="width:110px;margin-bottom:10px;">

  <div id="loginBox">
    <h3>Giri≈ü Yap</h3>

    <input id="username" placeholder="Kullanƒ±cƒ± adƒ±">

    <div id="passwordWrap">
      <input id="password" type="password" placeholder="≈ûifre">
      <span id="togglePass">üëÅÔ∏è</span>
    </div>

    <div id="capsWarning">Caps Lock a√ßƒ±k!</div>

    <button onclick="handleLogin()">Giri≈ü</button>

    <div id="loginError" style="color:#c62828;font-size:13px;"></div>
    <div id="blockMsg"></div>
  </div>
</div>

<!-- SESSION MODAL (10 dk kala) -->
<div id="sessionModal">
  <div id="sessionModalBox">
    <h3>Oturum S√ºreniz Dolmak √úzere</h3>
    <p>Yakla≈üƒ±k <span id="remainingText">10</span> dakika i√ßinde otomatik √ßƒ±kƒ±≈ü yapƒ±lacak.</p>
    <button id="continueBtn">Devam Et</button>
    <button id="logoutBtn2">√áƒ±kƒ±≈ü Yap</button>
  </div>
</div>

<!-- Cƒ∞HAZ Lƒ∞STESƒ∞ MODAL -->
<div id="devicesModal">
  <div id="devicesModalBox">
    <h3>üîå Baƒülƒ± Cihazlar</h3>
    <div id="devicesList" class="tiny"></div>
    <button id="closeDevicesBtn">Kapat</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" style="display:none;">

  <div class="header">
    <div class="title">
      <div>Akƒ±llƒ± DC G√º√ß √únitesi</div>
      <div class="subtitle" id="globalStatusText">Baƒülantƒ± kontrol ediliyor...</div>
    </div>

    <div class="right-controls">
      <div class="clock" id="realtimeClock">--:--:--</div>
      <button class="themeToggle" id="themeToggle">üåô</button>
      <button class="themeToggle" id="devicesBtn">üîå Baƒülƒ± Cihazlar</button>
      <button class="logoutBtn" onclick="logout()">√áƒ±kƒ±≈ü</button>
      <div class="lastData tiny" id="lastDataTs">Son veri: ‚Äî</div>
    </div>
  </div>

  <div class="summary">
    <div class="sum-card"><div class="sum-label">Toplam Voltaj</div><div class="sum-val" id="sumV">0.0 V</div></div>
    <div class="sum-card"><div class="sum-label">Toplam Akƒ±m</div><div class="sum-val" id="sumA">0.00 A</div></div>
    <div class="sum-card"><div class="sum-label">Toplam G√º√ß</div><div class="sum-val" id="sumW">0.0 W</div></div>
  </div>

  <div class="grid" id="grid"></div>
</div>

<script>
/* ============================================================
   LOGIN + TOKEN
============================================================ */
const loginBox = document.getElementById("loginBox");

function saveToken(t){ localStorage.setItem("sessionToken", t); }
function loadToken(){ return localStorage.getItem("sessionToken"); }
function clearToken(){ localStorage.removeItem("sessionToken"); }

/* ENTER ile login */
loginBox.addEventListener("keydown", e=>{
  if(e.key==="Enter") handleLogin();
});

/* CAPS LOCK kontrol√º */
document.getElementById("password").addEventListener("keyup", e=>{
  document.getElementById("capsWarning").style.display =
    e.getModifierState("CapsLock") ? "block" : "none";
});

/* ≈ûifre g√∂ster/gizle */
document.getElementById("togglePass").onclick = ()=>{
  const p=document.getElementById("password");
  p.type = p.type==="password" ? "text" : "password";
};

/* LOGIN */
async function handleLogin(){
  loginBox.classList.remove("errorBorder","shake","success");

  const username=document.getElementById("username").value.trim();
  const password=document.getElementById("password").value;

  const res=await fetch("/api/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ username,password })
  });

  const data=await res.json();

  if(data.ok){
    loginBox.classList.add("success");
    setTimeout(()=>{
      saveToken(data.token);
      showDashboard();
    },450);
    return;
  }

  loginBox.classList.add("errorBorder","shake");

  if(data.error==="wrong"){
    document.getElementById("loginError").innerText="Hatalƒ± kullanƒ±cƒ± adƒ± veya ≈üifre!";
  }
  else if(data.error==="blocked"){
    document.getElementById("blockMsg").innerText=`${data.remain} saniye sonra tekrar deneyin.`;
  }
  else if(data.error==="blocked30"){
    document.getElementById("blockMsg").innerText="3 hatalƒ± giri≈ü! 30 saniye bloke edildi.";
  }
}

/* TOKEN CHECK */
async function checkToken(){
  const token=loadToken();
  if(!token) return false;

  const res=await fetch("/api/check-token",{ headers:{ "authorization":token } });
  const data=await res.json();
  return data.ok===true;
}

/* LOGOUT */
let sessionTimer = null;
async function logout(){
  const token = loadToken();
  if(token){
    await fetch("/api/logout",{
      method:"POST",
      headers:{ "authorization":token }
    });
  }

  clearToken();
  if(sessionTimer) { clearInterval(sessionTimer); sessionTimer=null; }

  // LOGIN BOX'u eski haline getir
  loginBox.classList.remove("success", "errorBorder", "shake");
  loginBox.style.opacity = "1";
  loginBox.style.transform = "scale(1)";

  // INPUT alanlarƒ±nƒ± temizle (g√ºzel bir reset olsun)
  document.getElementById("username").value = "";
  document.getElementById("password").value = "";
  document.getElementById("loginError").innerText = "";
  document.getElementById("blockMsg").innerText = "";

  document.getElementById("dashboard").style.display="none";
  document.getElementById("loginScreen").style.display="flex";

  alert("G√º√ß √ºnitesinden ayrƒ±lƒ±nƒ±yor...");
}


/* DASHBOARD A√á */
function showDashboard(){
  document.getElementById("loginScreen").style.display="none";
  document.getElementById("dashboard").style.display="block";
  startSessionWatcher();
}

/* SAYFA A√áILINCA TOKEN KONTROL */
window.addEventListener("load", async()=>{
  if(await checkToken()) showDashboard();
});

/* ============================================================
   OTURUM S√úRESƒ∞ TAKƒ∞Bƒ∞ (1 saat + 10 dk kala uyarƒ±)
============================================================ */
let remainingMs = 0;
let modalShown = false;

async function getSessionInfo(){
  const token = loadToken();
  if(!token) return;

  const res = await fetch("/api/session-info", {
    headers:{ authorization: token }
  });

  const data = await res.json();

  if(!data.ok){
    alert("Oturum s√ºresi doldu.");
    logout();
    return;
  }

  remainingMs = data.remainMs;

  // 10 dakika = 600000 ms
  if(remainingMs <= 10*60*1000 && remainingMs > 0 && !modalShown){
    modalShown = true;
    const mins = Math.max(1, Math.ceil(remainingMs/60000));
    document.getElementById("remainingText").innerText = mins;
    document.getElementById("sessionModal").style.display = "flex";
  }

  if(remainingMs <= 0){
    alert("Oturum s√ºresi doldu.");
    logout();
  }
}

function startSessionWatcher(){
  if(sessionTimer) clearInterval(sessionTimer);
  sessionTimer = setInterval(getSessionInfo, 5000);
}

document.getElementById("continueBtn").onclick = async ()=>{
  const token = loadToken();
  if(!token) return;

  const res = await fetch("/api/extend-session", {
    method:"POST",
    headers:{ authorization: token }
  });
  const data = await res.json();

  if(data.ok){
    modalShown = false;
    document.getElementById("sessionModal").style.display="none";
    await getSessionInfo();
  }
};

document.getElementById("logoutBtn2").onclick = ()=> logout();

/* ============================================================
   üîå BAƒûLI Cƒ∞HAZLAR MODALƒ∞
============================================================ */
document.getElementById("devicesBtn").onclick = openDevicesModal;
document.getElementById("closeDevicesBtn").onclick = () => {
  document.getElementById("devicesModal").style.display = "none";
};

function formatMins(ms){
  return Math.max(0, Math.round(ms/60000));
}

async function openDevicesModal(){
  const token = loadToken();
  if(!token){
    alert("√ñnce giri≈ü yapmalƒ±sƒ±nƒ±z.");
    return;
  }

  const res = await fetch("/api/active-sessions", {
    headers:{ authorization: token }
  });
  const data = await res.json();

  if(!data.ok){
    alert("Oturum doƒürulanamadƒ±.");
    return;
  }

  const list = data.sessions || [];
  const container = document.getElementById("devicesList");
  container.innerHTML = "";

  if(list.length === 0){
    container.innerHTML = "<div class='tiny'>Aktif oturum bulunamadƒ±.</div>";
  } else {
    list.forEach((s, idx)=>{
      const div = document.createElement("div");
      div.className = "deviceRow";

      const createdStr = new Date(s.createdAt).toLocaleString();
      const mins = formatMins(s.remainMs);
      const ua = (s.userAgent || "Bilinmeyen cihaz");
      const shortUa = ua.length > 60 ? ua.slice(0,57) + "..." : ua;

      div.innerHTML = `
        <div class="tiny"><strong>${idx+1}.</strong> ${shortUa}</div>
        <div class="tiny">IP: ${s.ip || "-"} | Giri≈ü: ${createdStr}</div>
        <div class="tiny">Kalan s√ºre: ~${mins} dk</div>
        <button class="deviceLogoutBtn" data-token="${s.token}">Oturumu Sonlandƒ±r</button>
      `;
      container.appendChild(div);
    });
  }

  document.getElementById("devicesModal").style.display = "flex";

  document.querySelectorAll(".deviceLogoutBtn").forEach(btn=>{
    btn.onclick = async ()=>{
      const targetToken = btn.getAttribute("data-token");
      const myToken = loadToken();

      await fetch("/api/logout-token",{
        method:"POST",
        headers:{
          "Content-Type":"application/json",
          authorization: myToken
        },
        body: JSON.stringify({ token: targetToken })
      });

      if(targetToken === myToken){
        document.getElementById("devicesModal").style.display="none";
        logout();
      } else {
        openDevicesModal(); // listeyi tazele
      }
    };
  });
}

/* ============================================================
   DASHBOARD KODU (Sens√∂r verisi)
============================================================ */
const MON_NAMES=["DC Soket √áƒ±kƒ±≈üƒ± 1","DC Soket √áƒ±kƒ±≈üƒ± 2","USB-A Portu 1","USB-A Portu 2"];
const OFFLINE_THRESHOLD=10000;

let grid=document.getElementById("grid");
let charts=[],lastReceived=[],lastGlobal=Date.now();

/* Saat */
setInterval(()=>{document.getElementById("realtimeClock").innerText=new Date().toLocaleTimeString();},1000);

/* Tema */
document.getElementById("themeToggle").onclick=()=>{
  document.body.classList.toggle("dark");
  document.documentElement.classList.toggle("dark");
  document.getElementById("themeToggle").innerText =
    document.body.classList.contains("dark")?"‚òÄÔ∏è":"üåô";
};

/* Kartlar */
for(let i=0;i<MON_NAMES.length;i++){
  const id="mon"+i;
  const html=`<div class="card" id="${id}">
    <div class="card-title">
      <strong>${MON_NAMES[i]}</strong>
      <div id="dot${i}" class="status-dot" style="background:#f44;"></div>
    </div>

    <div class="values-row">
      <div class="val-box"><div class="val-num"><span>üîã</span><span id="v${i}">--</span></div><div class="val-label">Volt (V)</div></div>
      <div class="val-box"><div class="val-num"><span>üß≤</span><span id="a${i}">--</span></div><div class="val-label">Akƒ±m (A)</div></div>
      <div class="val-box"><div class="val-num"><span>‚ö°</span><span id="w${i}">--</span></div><div class="val-label">G√º√ß (W)</div></div>
    </div>

    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div class="tiny">Sƒ±caklƒ±k: <span id="t${i}">--</span>¬∞C</div>
      <div class="tiny" id="stat${i}">Durum: ‚Äî</div>
    </div>

    <canvas id="chart${i}" height="110"></canvas>
  </div>`;

  const div=document.createElement("div");
  div.innerHTML=html;
  grid.appendChild(div.firstElementChild);
  lastReceived[i]=0;
}

/* Grafikler */
for(let i=0;i<MON_NAMES.length;i++){
  charts[i]=new Chart(document.getElementById("chart"+i).getContext("2d"),{
    type:"line",
    data:{
      labels:[],
      datasets:[
        {label:"Volt (V)",data:[],borderColor:"#1E90FF",backgroundColor:"rgba(30,144,255,0.06)",pointRadius:0,tension:0.25},
        {label:"Akƒ±m (A)",data:[],borderColor:"#FF3B30",backgroundColor:"rgba(255,59,48,0.06)",pointRadius:0,tension:0.25},
        {label:"G√º√ß (W)",data:[],borderColor:"#00C853",backgroundColor:"rgba(0,200,83,0.06)",pointRadius:0,tension:0.25}
      ]
    },
    options:{ animation:false, plugins:{legend:{display:true}}, scales:{x:{display:false}} }
  });
}

/* Flash efekt */
function flash(el,type){
  el.classList.remove("flash-up","flash-down");
  void el.offsetWidth;
  el.classList.add(type==="up"?"flash-up":"flash-down");
  setTimeout(()=>el.classList.remove("flash-up","flash-down"),400);
}

/* WebSocket */
const protocol=(location.protocol==="https:")?"wss:":"ws:";
const WS_URL=protocol+"//"+location.host;
const socket=new WebSocket(WS_URL);

let lastTs=0;

/* Veri geldiƒüinde dashboard g√ºncelle */
socket.addEventListener("message",(e)=>{
  const msg=JSON.parse(e.data);

  if(msg.type==="init"||msg.type==="update"){
    lastTs=msg.ts;
    document.getElementById("lastDataTs").innerText="Son veri: "+fmtTs(lastTs);
    processData(msg.data||{});
  } else if(msg.type==="offline"){
    makeAllOffline();
  }
});

/* Zaman formatƒ± */
function fmtTs(ts){
  if(!ts) return "‚Äî";
  const d=new Date(ts);
  return d.toLocaleDateString()+" "+d.toLocaleTimeString();
}

/* Dashboard veri i≈üleme */
function processData(obj){
  let totalV=0,totalA=0,totalW=0;
  let anyActive=false;

  for(let i=0;i<MON_NAMES.length;i++){
    const d=obj["monitor"+(i+1)]?.hat1;

    const vEl=document.getElementById("v"+i);
    const aEl=document.getElementById("a"+i);
    const wEl=document.getElementById("w"+i);
    const tEl=document.getElementById("t"+i);
    const statEl=document.getElementById("stat"+i);
    const dotEl=document.getElementById("dot"+i);
    const ch=charts[i];

    if(!d){
      vEl.innerText=aEl.innerText=wEl.innerText=tEl.innerText="-";
      statEl.innerText="Baƒülantƒ± yok ‚Äî kontrol edilmeli";
      dotEl.style.background="red";
      continue;
    }

    const v=d.voltage.value;
    const a=d.current.value;
    const w=d.power.value;

    vEl.innerText=v.toFixed(2);
    aEl.innerText=a.toFixed(3);
    wEl.innerText=w.toFixed(2);
    tEl.innerText=d.temperature.value.toFixed(1);

    flash(vEl,"up");
    flash(aEl,"up");
    flash(wEl,"up");

    if(a<0.005 || w<0.05){
      statEl.innerText="Enerji yok ‚ö†Ô∏è";
      dotEl.style.background="#ff9800";
    } else {
      statEl.innerText="Baƒülantƒ±: Aktif";
      dotEl.style.background="#0f0";
      anyActive=true;
    }

    if(ch.data.labels.length>=30){
      ch.data.labels.shift();
      ch.data.datasets.forEach(ds=>ds.data.shift());
    }
    ch.data.labels.push("");
    ch.data.datasets[0].data.push(v);
    ch.data.datasets[1].data.push(a);
    ch.data.datasets[2].data.push(w);
    ch.update("none");

    totalV+=v; totalA+=a; totalW+=w;
  }

  document.getElementById("sumV").innerText=totalV.toFixed(2)+" V";
  document.getElementById("sumA").innerText=totalA.toFixed(3)+" A";
  document.getElementById("sumW").innerText=totalW.toFixed(2)+" W";

  const globalEl=document.getElementById("globalStatusText");

  if(anyActive) globalEl.innerText="Baƒülantƒ± ba≈üarƒ±lƒ±";
  else if(Date.now()-lastTs>OFFLINE_THRESHOLD) globalEl.innerText="Sistem ile ileti≈üim yok";
  else globalEl.innerText="Baƒülantƒ± kontrol ediliyor...";
}

/* Offline durumunda kartlarƒ± sƒ±fƒ±rla */
function makeAllOffline(){
  MON_NAMES.forEach((m,i)=>{
    document.getElementById("v"+i).innerText="-";
    document.getElementById("a"+i).innerText="-";
    document.getElementById("w"+i).innerText="-";
    document.getElementById("t"+i).innerText="-";
    document.getElementById("stat"+i).innerText="Sistem ile ileti≈üim yok";
    document.getElementById("dot"+i).style.background="red";
  });

  document.getElementById("globalStatusText").innerText="Sistem ile ileti≈üim yok";
}
</script>

</body>
</html>
